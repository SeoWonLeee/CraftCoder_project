# 📍 CraftCoder Backend

## 프로젝트 개요
- CraftCoder는 문화센터의 **강좌 예약, 구독, 회원·강사 관리**를 지원하는 백엔드 서비스입니다.  
- 강좌 대기열 관리, 실시간 알림, 결제 및 정산 기능을 제공하여 운영 효율성과 사용자 경험을 강화했습니다.  
- 서비스 모듈을 분리해 확장성과 독립 배포가 가능한 구조를 갖추었습니다.  

<br/>  

## 역할 및 책임
- **관리자 강사 관리 REST API** 설계 및 구현  
  - 강사 목록, 상세 조회 및 강사 요청 기반의 강좌 수정·삭제·상태 변경 시나리오를 제공했습니다.  
- **변경 내역 검증 로직 구축**  
  - 강좌 변경 시 요청 전후 데이터를 비교하여 운영자가 변경 내역을 즉시 확인할 수 있도록 했습니다.  
- **강사 요청 처리 플로우 설계**  
  - 강사 요청 생성·승인·거절·완료를 담당하는 서비스 계층을 구축하고, 강좌 소유자 검증 및 역할 검증으로 권한 없는 조작을 차단했습니다.  
- **관리자 전용 요청 API 개발**  
  - 요청 전체/상세 조회, 승인·거절 플로우를 제공하여 운영팀이 강사 요청을 일괄 관리할 수 있도록 했습니다.  

<br/>  

## 주요 기능
- **강좌 대기열 및 결제 흐름 자동화**  
  - Redis Sorted Set과 Redisson 분산 락을 이용해 대기열/활성 큐를 관리하고, 결제 완료·취소 시 수강 상태를 업데이트하며 가용 좌석 발생 시 알림 이벤트를 발행했습니다.  
- **실시간 알림 및 재전송 보장**  
  - SSE 기반 구독을 제공하고, 유실된 이벤트 재전송을 위해 캐시 및 비동기 이벤트 리스너를 구성했습니다.  
- **관리자 강좌 관리와 카테고리 필터**  
  - 강좌 목록·상세 조회, 생성, 카테고리별 필터링, 수강생 목록 확인을 지원했습니다.  
- **구독 프로그램 라이프사이클 관리**  
  - 프로그램 등록 시 중복 검증, 소프트 삭제, 단건 조회 API를 제공해 상품 운영을 단순화했습니다.  

<br/>  

## 기술 스택
- **언어/빌드**: Java 17, Gradle 멀티 모듈  
- **프레임워크**: Spring Boot 3.4.1, Spring Cloud, Spring Security  
- **데이터/캐시**: MySQL 8.0, Redis, Redisson  
- **운영/도구**: Docker Compose, OpenAPI(Swagger), Prometheus, SSE  

<br/>  

## 문제 해결 사례
- **대기열 동시성 제어**  
  - Redisson 기반 분산 락과 Scheduled 작업으로 대기/활성 큐를 관리하고, 좌석 확보 시 알림 이벤트를 발행해 동시 접속 환경에서도 일관된 처리를 보장했습니다.  
- **알림 유실 방지**  
  - SSE 연결이 끊겨도 이벤트 캐시를 통해 누락된 알림을 재전송하고, 트랜잭션 커밋 이후 비동기 이벤트로 발송하여 안정성을 확보했습니다.  

<br/>  

## 결과 및 성과
- 관리자와 강사 간 **강좌 변경·삭제·상태 변경 요청을 표준화된 API**로 제공하여 운영자가 내역을 검증·승인할 수 있는 워크플로를 마련했습니다.  
- 대기열 관리, 알림 발송, 강좌/구독 관리 기능을 모듈 단위로 분리하여 **향후 확장성과 독립 배포 가능성**을 확보했습니다.  

<br/>  

## 데이터 참고
- **강좌 대기열 흐름 데이터**  
  <img width="1570" height="666" alt="Image" src="https://github.com/user-attachments/assets/764b7e55-299f-43ad-bf8d-3e7b5d02a6a3" />

<br/>  

## 참고 링크
- GitHub 조직: https://github.com/orgs/DeepDive-2nd-Project/repositories  
- Jira 프로젝트: https://scwdltjdnjs-1736741553613.atlassian.net/jira/software/projects/KAN/list  
